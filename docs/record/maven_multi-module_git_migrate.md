##　maven多模块项目拆分，并为每个模块单独建立仓库

在微服务拆分的过程中可能会存在这样的需求，要把每个模块单独做成一个仓库，同时需要保留历史的提交记录，我们可以用git的 filter-brancher来完成
```code
git clone origin
cd 目录
git filter-branch --subdirectory-filter 需要保留的文件夹
git push --force origin
```
## 示例
```code
$ git clone origin
Cloning into ''...
remote: Enumerating objects: 145012, done.
remote: Counting objects: 100% (145012/145012), done.
remote: Compressing objects: 100% (39024/39024), done.
remote: Total 145012 (delta 62045), reused 144986 (delta 62026)
Receiving objects: 100% (145012/145012), 57.28 MiB | 6.09 MiB/s, done.
Resolving deltas: 100% (62045/62045), done.
Updating files: 100% (3232/3232), done.

$ cd order-platform/

$ ls -l
total 48
-rw-r--r-- 1 zrh 197121     0 Jan  5 11:40 README.md
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-api/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-auth/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-biz/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-cache/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-common/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-job/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-message/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-order/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-process/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-product/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-return-exchange/
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 op-user/
-rw-r--r-- 1 zrh 197121 27614 Jan  5 11:40 pom.xml
drwxr-xr-x 1 zrh 197121     0 Jan  5 11:40 sql/

$ git filter-branch --subdirectory-filter op-user
WARNING: git-filter-branch has a glut of gotchas generating mangled history
         rewrites.  Hit Ctrl-C before proceeding to abort, then use an
         alternative filtering tool such as 'git filter-repo'
         (https://github.com/newren/git-filter-repo/) instead.  See the
         filter-branch manual page for more details; to squelch this warning,
         set FILTER_BRANCH_SQUELCH_WARNING=1.
Proceeding with filter-branch...

Rewrite a4b3310c0183c2387c1a1d88539e79c3abb58d70 (1/143) (0 seconds passed, remaRewrite 991f6dd25ad2b8135c213d59e34530276e4da84f (2/143) (1 seconds passed, remaRewrite 800d4fc52eddb4e40aae69b241ec9356e84176f3 (2/143) (1 seconds passed, remaRewrite 9486df45a71ab8f68f3cc0fda2cddb44ef9b8bb1 (2/143) (1 seconds passed, remaRewrite cdfcb23f1e839dfb194f1d8018840b90828bef44 (5/143) (2 seconds passed, remaRewrite 74ab847341ce12f8f35c320674e0658f8dfffbd3 (5/143) (2 seconds passed, remaRewrite c093b66146188eb99d727d76f2cf00d44bdb6534 (5/143) (2 seconds passed, remaRewrite 08a3ce87ae782801c7618e97483831a4a2b8f3af (8/143) (4 seconds passed, remaRewrite 664baf80a45e3c50756259bfd1c62febe2cd2bd7 (8/143) (4 seconds passed, remaRewrite e2c1be34f6b93407e860344b57b74f878b87e5fd (8/143) (4 seconds passed, remaRewrite dcfb4ee26661aace6d14ecd8b88da3032d4ed084 (11/143) (5 seconds passed, remRewrite da3febe3382b5776a83bb666843296d1e9b17db3 (11/143) (5 seconds passed, remRewrite dcd4a36d1653652733c128a98a3a54768bbc65ae (11/143) (5 seconds passed, remRewrite f0b9e2f28693ac22aba98473d7613bba9d70e6cf (14/143) (6 seconds passed, remRewrite ce07cc7693c736aec0beee7bc02a1ccc09d3c081 (14/143) (6 seconds passed, remRewrite 97cef13d194ae5f6435f722d1f0344e90281e166 (14/143) (6 seconds passed, remRewrite 6249e7513f531728174bba809defe20f8323b53a (17/143) (8 seconds passed, remRewrite 8da0fd605ca48ac86fa83dd966f3226d1a5304ed (17/143) (8 seconds passed, remRewrite 4e7319752504dbe757d5d1c67798a9e4d51a71d0 (17/143) (8 seconds passed, remRewrite a222ce101e59c84a97b25c38aed49bfd8c8d0231 (20/143) (9 seconds passed, remRewrite 1b1971257bd4e09dc79e760d63d0c3c4300af7d9 (20/143) (9 seconds passed, remRewrite 97d67ec4b6ae95f0ebd0b9c456bb8976238240f7 (20/143) (9 seconds passed, remRewrite 62f07f8b66d41be5052b45cc80725718fda3ad34 (23/143) (11 seconds passed, reRewrite 2a759c54c365f092391937be84903659be12deba (23/143) (11 seconds passed, reRewrite 901e5e6a4f08e897ef66b26397b6645c1c14741a (23/143) (11 seconds passed, reRewrite 41c9ae650e55039cd1ddb93a3d9521e239db28a2 (26/143) (12 seconds passed, reRewrite fb82d531fb1ccd4dd43ed0b2863962a736c52211 (26/143) (12 seconds passed, reRewrite 62b3583896a69dbdadb16a3c8fd8697f91678d2a (26/143) (12 seconds passed, reRewrite de0e416d8f33ef615201d2be103c781f04adeca1 (29/143) (13 seconds passed, reRewrite a2dfc2b4af3e6914cd7ac2022c94d2aedd3cc90f (29/143) (13 seconds passed, reRewrite aec02e9652f42834e0f620456ba31db194a1cc98 (29/143) (13 seconds passed, reRewrite 223f50caa21797aba2a232df8d24dc7fa6bce9ab (32/143) (15 seconds passed, reRewrite 08fbfe7512c880a0df27d6c3bee033129c6f234c (32/143) (15 seconds passed, reRewrite 2b5f8739dc0ddaac6a8dd39a52c93636b0585750 (32/143) (15 seconds passed, reRewrite cb0ddca0cb031d6f2f75f93191f5e3ca1ad6d86e (35/143) (16 seconds passed, reRewrite b9c5e1d9bf4c1d508dbe4aa22668d521703635f8 (35/143) (16 seconds passed, reRewrite ce3a81d37525464d8086ce1a4e2e0a38536c6b30 (35/143) (16 seconds passed, reRewrite 0003fb86dc3db930608fcb074de36a3844e971e9 (38/143) (18 seconds passed, reRewrite b6c0a66c97946d32281d612c0e22995090f4fcbf (38/143) (18 seconds passed, reRewrite ecbdc86a2c54340b6d864974195ad52656617e9e (38/143) (18 seconds passed, reRewrite 228d6ac6e8278a9da36ed07ca9b00f6712f21d49 (41/143) (19 seconds passed, reRewrite 6b1c8c02fd551b5203bff30f9110b0f491746b8c (41/143) (19 seconds passed, reRewrite 8287243d48a83a41c1eed6ddb5d7a35b6bdf497a (41/143) (19 seconds passed, reRewrite 9d09d214529e658c9472678b5041b60cd5236588 (44/143) (21 seconds passed, reRewrite 3c36a144728b53e845a86b9845be5a65770f3b1b (44/143) (21 seconds passed, reRewrite f022e5759ce766e9e1f724905057758382fcb639 (44/143) (21 seconds passed, reRewrite f0cfbadbd7b55a2ab7a231dbecb6489b14679c10 (47/143) (22 seconds passed, reRewrite 0090947a70bd999a6e6b51cd868d8f8b0789af7f (47/143) (22 seconds passed, reRewrite 1684c7b7c18a4e3143e8a3bd006b045807833a1b (47/143) (22 seconds passed, reRewrite 620aabbb56e7d3158d619046292c098ebd51c436 (50/143) (23 seconds passed, reRewrite 2a4a32febb442dc80b7f30febb9d528afb00810f (50/143) (23 seconds passed, reRewrite 5bd1084d6d4e00d25fec4d622db6711f4eed4fca (50/143) (23 seconds passed, reRewrite 332ae6218d918955fe48703eb6fa38fdd6dff114 (53/143) (25 seconds passed, reRewrite 331e01b16094886e2131a16d5a187fb86dc4af91 (53/143) (25 seconds passed, reRewrite ac24381d346d839aaaab1d07b3671a57cd449345 (53/143) (25 seconds passed, reRewrite 3bdf26bfa88a261c48c27feaec9cccf679be6049 (56/143) (26 seconds passed, reRewrite 0401a6315f21d5d5db0aaaac6eee3afafd8ea8f4 (56/143) (26 seconds passed, reRewrite 1f47b21ce58cfcd82b9ffbf64899ff4969dddc20 (56/143) (26 seconds passed, reRewrite 193e91372678e3382f00eb17b6e29c8608e75629 (59/143) (28 seconds passed, reRewrite bf8cfad65810096a2953f0b3f9ecb1daf530ad09 (59/143) (28 seconds passed, reRewrite 23b85796566681f4181b0d32b1d8bfcc10d28cca (59/143) (28 seconds passed, reRewrite 2390280ad065c1d2eb0dc4df43f0991b8d122b1d (62/143) (29 seconds passed, reRewrite 92e1c7f6411725c3889a155f713575556c581e32 (62/143) (29 seconds passed, reRewrite d4a5e57a47255e9653ba8e9e5a2aa53856aad557 (62/143) (29 seconds passed, reRewrite a267a293945d19a5a114ab8d2d6fa940ce22d6ab (65/143) (31 seconds passed, reRewrite f1b2c787d76260d29769d5193d2122cab948e168 (65/143) (31 seconds passed, reRewrite 60e8837e71ad56b79d674a17a84e1ab5f5b2a9a3 (65/143) (31 seconds passed, reRewrite be3f23477630725b8bb4454ff1bd6cbe90a8a888 (68/143) (32 seconds passed, reRewrite dd2b8d4b61898e785d6641bb0f083d3d5ae37f96 (68/143) (32 seconds passed, reRewrite be73e6f48e2c3268b2614cd85ef07c79d46d9a3d (68/143) (32 seconds passed, reRewrite 636e737b4d2af5cfb47cfdc9e2f79d5c15da3c96 (71/143) (33 seconds passed, reRewrite 8d237b11ef0fca3af776dbdb628d324e30e3a30f (71/143) (33 seconds passed, reRewrite 7e30d516fa993aabf3e2c7c6d2bc9d6ea85d7b51 (71/143) (33 seconds passed, reRewrite 931611bd82c687170ff25626510ad22fd0025598 (74/143) (35 seconds passed, reRewrite 8b5ba8a63350bf0440acc7ad349ec72d66c1612c (74/143) (35 seconds passed, reRewrite 3cf377de44f4433d675158651aec47241f53f72c (74/143) (35 seconds passed, reRewrite 4f6904c71cb7be0067a70a493f045d1fd747091d (77/143) (37 seconds passed, reRewrite 9ef864e6b1c9484c00932d0bc02e9b3598dadacb (77/143) (37 seconds passed, reRewrite 9f1b89e1bea0f7fadc78c3a437ee86c3f7b20c86 (77/143) (37 seconds passed, reRewrite fa47a30f45d9e947b253662d952a6968310cabd3 (80/143) (38 seconds passed, reRewrite cabdeae779c36e48c8ce7dcde3652fef5574108e (80/143) (38 seconds passed, reRewrite 52e86f8d9e1834c4dcc5ed0f828da6bf89b87656 (80/143) (38 seconds passed, reRewrite 81f01bc600d28b33c15dac19963a440a67a868ae (83/143) (39 seconds passed, reRewrite 675132f5d40e6443c45e0eb53f506703eb916b01 (83/143) (39 seconds passed, reRewrite 089c05473e9c50e3bb113bc663454273c386fe1b (83/143) (39 seconds passed, reRewrite 0d664c55d5af10f5c5756248e4056209882f8e0e (86/143) (41 seconds passed, reRewrite 86a1d641cd82919df75b0106d0dbbfbef1783146 (86/143) (41 seconds passed, reRewrite f7984c43525550eae93154139696ec3a01eda386 (86/143) (41 seconds passed, reRewrite c319d053316d5f388e092a9d2fe5ff0bce7c4c04 (89/143) (43 seconds passed, reRewrite 9e45ee4733365d74be428dafba7823f968b8e91a (89/143) (43 seconds passed, reRewrite ab222980b8016d081927d12df48d11bb45e7809d (89/143) (43 seconds passed, reRewrite 30dc21ba3af263ff06e10ba4e15c4d6d37eddd6c (92/143) (44 seconds passed, reRewrite 5f9c5bb46a334a34c64d9320f9a34b9c60658272 (92/143) (44 seconds passed, reRewrite 2dedd3df92d53636a19e87538f623c06f3a53cd4 (92/143) (44 seconds passed, reRewrite 154528f3778eb27ecc084c2f3762d82f0f619e52 (95/143) (46 seconds passed, reRewrite 2db8533e38d4e1743d92961778d58e112e9bcc92 (95/143) (46 seconds passed, reRewrite c7a59a0c73ec4b0eae41a98d734558b023512234 (95/143) (46 seconds passed, reRewrite ef4c951dc6b02b462db9b9ccacced10503bc33d4 (98/143) (47 seconds passed, reRewrite ec870197dea1c9ab782a511ca3b0b32c77e2c26c (98/143) (47 seconds passed, reRewrite 4ac93bc9b432b4340c85364938b5e3ca36ff1281 (98/143) (47 seconds passed, reRewrite 468730c35f966becec1db56cdb4a6ba4f84d38d0 (101/143) (49 seconds passed, rRewrite 2b95d8c8d70758d8c13f0069daf5b799820d48a0 (101/143) (49 seconds passed, rRewrite 8ddabb359718cced4300f538695bb85c7cb9f87e (101/143) (49 seconds passed, rRewrite 9a8f33343975a7589fc9d782e79377324aaa04fc (104/143) (50 seconds passed, rRewrite b1663236e350476278ccb4de76c64b9c670ba3da (104/143) (50 seconds passed, rRewrite 1233742f2a9926cc6805328d758e4c73e2d73df9 (104/143) (50 seconds passed, rRewrite cecb1abb701c527ab89a78f6f144121cc51728db (107/143) (52 seconds passed, rRewrite 57ad4954395fb9af792c79c8f32a51197b6782bc (107/143) (52 seconds passed, rRewrite d4e9fce0d036a725d7a144efafd45ca526d4fd02 (107/143) (52 seconds passed, rRewrite 6e29441d069319d94f469c6319974e136b599036 (110/143) (53 seconds passed, rRewrite 810f54bc32ed29872ef49015d9feb137a6f5be2c (110/143) (53 seconds passed, rRewrite fed834e1536561cf79ebe199254565ffc4c32bae (110/143) (53 seconds passed, rRewrite 0e51c386a5e722e6e872900ae612a6401ad78ae4 (113/143) (55 seconds passed, rRewrite a38a2515804a469fea11bf9c4b90cc35f8ce2c39 (113/143) (55 seconds passed, rRewrite cbb50ed13c966607d34fcb3d41e9936f996e32db (113/143) (55 seconds passed, rRewrite 977b2b19f17a3d85e8e0dc7bd0c888a7a5e1c5d1 (116/143) (56 seconds passed, rRewrite f3188876b7ef947bdccb855d4b7d4c3d6adfb21a (116/143) (56 seconds passed, rRewrite 79e426ad23ab1ce358b49c5f3a82509f8189f506 (116/143) (56 seconds passed, rRewrite 586692a747c048cb0dc4bf25b55d9e4a3628d526 (119/143) (57 seconds passed, rRewrite f976f99b84abb68355927ac321a374bfa9d89f39 (119/143) (57 seconds passed, rRewrite 318b8830cf64bc83d602f8256feca08899997f15 (119/143) (57 seconds passed, rRewrite eb26fd7986a974e1f31cfc08b1bd4ba6c7f1945f (122/143) (59 seconds passed, rRewrite f93246ac061037469b9f7322658a08b5f0461db2 (122/143) (59 seconds passed, rRewrite 1cf50c13a32fb6f379947b9ec227ffabfc8de478 (122/143) (59 seconds passed, rRewrite a8a5b270b4e9ee0058e5c59fe074f963f3b307e6 (125/143) (60 seconds passed, rRewrite 7c18057294081fbdc1b4aa2a01720861a9496dee (125/143) (60 seconds passed, rRewrite 2fe4c31f0f577ab9905e835bba17f8c950a1e15e (125/143) (60 seconds passed, rRewrite 4c3a176c4fafa995101667d2060619fef6de15b7 (128/143) (63 seconds passed, rRewrite 4984e2c7bd88e58b40f2cf4e9f80e75941d5f1e9 (128/143) (63 seconds passed, rRewrite 5a84b6f41fb8df35d4303068e3298447ca30c0da (128/143) (63 seconds passed, rRewrite e98ff67b1362e682f771d2133cfa883078bd9bf1 (131/143) (64 seconds passed, rRewrite f3483704fca7683907f562c8093a8c2bea96476a (131/143) (64 seconds passed, rRewrite 067bebef1745d45f1e249ccf13b2887ffb07d986 (131/143) (64 seconds passed, rRewrite 36be67e9285a42a8ec5b556eb5cf5051873c4ddd (134/143) (66 seconds passed, rRewrite 88d1220c74e444cc2464a8b851c188c949478b20 (134/143) (66 seconds passed, rRewrite 8169062ead1b19f29817a3f82c9a9c6e1aae2f91 (134/143) (66 seconds passed, rRewrite c315eb59bf9df1d3bf5ec5a9cfc61389bede12ad (137/143) (67 seconds passed, rRewrite 01a6368077286d490dc67545b3328d149f59d350 (137/143) (67 seconds passed, rRewrite 2cb54948349f77f68aaac6e50e8d660c0d03c255 (137/143) (67 seconds passed, rRewrite 8e9ed742358ecc7d7d2c191c6ac61f6a6586bad5 (140/143) (69 seconds passed, rRewrite 2e93ef099dab5d140237d08f937a834a5ab86965 (140/143) (69 seconds passed, rRewrite c557fa0879918a38fcbb788a3068474e4951b0d7 (140/143) (69 seconds passed, rRewrite 11945e9f63cfc7e316db7b5102df25e9a4097c29 (143/143) (70 seconds passed, remaining 0 predicted)
Ref 'refs/heads/master' was rewritten

$ git push --force origin
Enumerating objects: 1707, done.
Counting objects: 100% (1707/1707), done.
Delta compression using up to 12 threads
Compressing objects: 100% (741/741), done.
Writing objects: 100% (1707/1707), 158.51 KiB | 5.28 MiB/s, done.
Total 1707 (delta 410), reused 1467 (delta 326), pack-reused 0
remote: Resolving deltas: 100% (410/410), done.
```